<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>forEach</title>
	
	<script type="text/javascript">
	
		function choiceMenu(){
			let str ="";
			
			//alert(document.querySelectorAll(".menu")); //[object NodeList]
			//alert(document.querySelector(".menu")); //[object HTMLInputElement]
		
			document.querySelectorAll(".menu").forEach((item) =>{
				
				if(item.checked) str += item.value + " ";
				item.checked =false;
			});
			
			if( str == "") alert("하나 이상의 메뉴는 반드시 선택해주세요");
			else alert("당신이 선택한 메뉴는 " + str + "!!");
			
		}
		
		onload = ()=>{
			document.querySelectorAll(".menus").forEach(function(item){
				
				item.onclick = function() { //버튼을 클릭하면 호출
					
					//this는 현재 이벤트가 적용되고 있는 태그 자기 자신을 가르킨다.
					let id = this.closest(".main-menu").attributes["id"].value;  //button 의 부모의 id 찾기
					alert(id);
				}; 
					
			});
			
			
/* 			document.querySelectorAll(".menu").forEach((item) =>{
				
				//ERROR
				//errow 함수에서는 this를 쓰면 안된다.
				//errow function에서의 this는 자신이 정의된 위치의 상위 컨텍스트에서 상속받습니다. 
				item.onclick = ()=>{
					let id = this.closest(".main-menu").attributes["id"].value;  //button 의 부모의 id 찾기
					alert(id);
					
				}
			}); */
			
		}
		
	</script>
	
	
	
</head>
<body>
	<h2>CheckBox Form</h2>
	
	<form action="">
		<div class="main-menu" id="lunch">
			<strong>오늘 점심 드시고 싶은 메뉴를 고르세요. </strong>
			<br> <input type="checkbox" name="menu" value="초밥" class="menu">초밥<br>
			<input type="checkbox" name="menu" value="우동" class="menu">우동<br>
			<input type="checkbox" name="menu" value="짜장면" class="menu">짜장면<br>
			<input type="checkbox" name="menu" value="카레라이스" class="menu">카레라이스<br>
			<input type="button" value="선택" onclick="choiceMenu()">
	
			<button class="menus">Lunch Choice</button>
		</div>

		<br>
		<div class="main-menu" id="dinner">
			<strong>오늘 저녁 드시고 싶은 메뉴를 고르세요. </strong>
			<br> <input type="checkbox" name="menu" value="김치찌개1" class="menu">김치찌개<br>
			<input type="checkbox" name="menu" value="통닭1" class="menu">통닭<br>
			<input type="checkbox" name="menu" value="칼국수1" class="menu">칼국수<br>
			<input type="checkbox" name="menu" value="곱창전골1" class="menu">곱창전골<br>
			<input type="button" value="선택" onclick="choiceMenu()">
	
			<button class="menus">Dinner Choice</button>
		</div>		
		
		
	</form>
	
	
</body>
</html>